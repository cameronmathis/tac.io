var le=Object.defineProperty;var T=Object.getOwnPropertySymbols;var de=Object.prototype.hasOwnProperty,ue=Object.prototype.propertyIsEnumerable;var L=(t,n,o)=>n in t?le(t,n,{enumerable:!0,configurable:!0,writable:!0,value:o}):t[n]=o,P=(t,n)=>{for(var o in n||(n={}))de.call(n,o)&&L(t,o,n[o]);if(T)for(var o of T(n))ue.call(n,o)&&L(t,o,n[o]);return t};import{v as me,i as he,g as pe,a as q,c as D,r as k,s as _e,u as H,j as e,R as Y,I as K,d as j,S as W,b as be,e as b,f as E,h as f,F as S,T as fe,B as C,k as ge,M as ye,l as A,o as ve,m as Se,n as x,N as z,p as xe,q as X,t as ke,D as Ge,P as Ne,H as Ce,w as we,x as Ie}from"./vendor.51cf9d00.js";const Me=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const r of document.querySelectorAll('link[rel="modulepreload"]'))a(r);new MutationObserver(r=>{for(const s of r)if(s.type==="childList")for(const i of s.addedNodes)i.tagName==="LINK"&&i.rel==="modulepreload"&&a(i)}).observe(document,{childList:!0,subtree:!0});function o(r){const s={};return r.integrity&&(s.integrity=r.integrity),r.referrerpolicy&&(s.referrerPolicy=r.referrerpolicy),r.crossorigin==="use-credentials"?s.credentials="include":r.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function a(r){if(r.ep)return;r.ep=!0;const s=o(r);fetch(r.href,s)}};Me();const Pe="player1",Oe="player2";function J(){this.board=[["empty","empty","empty"],["empty","empty","empty"],["empty","empty","empty"]],this.currentPlayer=Math.random()<.5?Pe:Oe,this.id=me().substring(0,5),this.isActive=!1,this.player1={gameScore:0,id:null,name:null,symbol:"x"},this.player2={gameScore:0,id:null,name:null,symbol:"o"},this.winner=null}const $e={apiKey:"AIzaSyBlozCM8uRov_73nBj-fk5VF70h0Ysr060",authDomain:"tacio-clmat.firebaseapp.com",databaseURL:"https://tacio-clmat-default-rtdb.firebaseio.com",projectId:"tacio-clmat",storageBucket:"tacio-clmat.appspot.com",messagingSenderId:"3090956232",appId:"1:3090956232:web:777eeb27c7610d47798afd",measurementId:"G-JE4QX5ZD7X"},Ee=he($e),G=pe(Ee);function Ae(t){q(D(k(G),`games/${t.id}`)).then(n=>{if(n.exists())return"Game already exists";_e(k(G,"games/"+t.id),t)}).catch(n=>{console.error(n)})}function Ue(t){return q(D(k(G),`games/${t}`)).then(n=>n.exists()?n.val():"Game not found").catch(n=>{console.error(n)})}function w(t){H(k(G,"games/"+t.id),t)}const Re="_snackbar_c68yb_1";const V=({isOpen:t,closeSnackbar:n,message:o})=>{const r=(i,d)=>{d!=="clickaway"&&n()},s=e(Y.Fragment,{children:e(K,{size:"small","aria-label":"close",color:"inherit",onClick:r,children:e(j,{fontSize:"small"})})});return e(W,{class:Re,open:t,autoHideDuration:5e3,onClose:r,message:o,action:s})},h=be(t=>({currentPath:"/home",setCurrentPath:n=>t(()=>({currentPath:n})),isMobile:null,setIsMobile:n=>t(()=>({isMobile:n})),currentUser:null,setCurrentUser:n=>t(()=>({currentUser:n})),currentGameId:null,setCurrentGameId:n=>t(()=>({currentGameId:n}))})),Te="_container_1itto_1",Le="_body_1itto_9";const ze="_textField_1itto_22",B="_button_1itto_23";function $(){const t=h(l=>l.currentUser),n=h(l=>l.currentGameId),o=h(l=>l.setCurrentGameId),a=h(l=>l.setCurrentPath),[r,s]=b.exports.useState(""),[i,d]=b.exports.useState(!1),[u,v]=b.exports.useState(""),_=E();b.exports.useEffect(()=>{s(n||"")},[n]);const g=l=>{s(l.target.value)},c=l=>{o(l.id),a(M.path),_(M.path)};return f(S,{children:[e("div",{className:Te,children:f("div",{className:Le,children:[e(fe,{className:ze,id:"filled-hidden-label-small",label:"Game Code",value:r,onChange:g}),e(C,{className:B,variant:"outlined",onClick:()=>{Ue(r).then(l=>{if(l==="Game not found"){v("Game not found"),d(!0);return}if(!l.isActive){v("Game is not currently active"),d(!0);return}if(l.player1.id===t.id||l.player2.id===t.id){c(l);return}else if(l.player2.id!==void 0){v("Game already has two players"),d(!0);return}l.player2.id=t.id,l.player2.name=t.name,w(l),c(l)})},children:"Join Game"}),e(C,{className:B,variant:"outlined",onClick:()=>{let l=new J;l.isActive=!0,l.player1.id=t.id,l.player1.name=t.name,Ae(l),c(l)},children:"Create Game"})]})}),e(V,{isOpen:i,closeSnackbar:d,message:u})]})}function Be(){this.email=null,this.id=null,this.name=null}function Fe(t){H(k(G,"users/"+t.id),t)}const qe="_container_1pm40_1",De="_button_1pm40_9";function Q(){const t=h(a=>a.setCurrentUser),n=a=>{let r=new Be;return r.email=a.email,r.id=a.googleId,r.name=a.givenName,r},o=a=>{let r=a.profileObj,s=n(r);Fe(s),t(s)};return e("div",{className:qe,children:e(ge.exports.GoogleLogin,{className:De,clientId:"3090956232-ce08f1dh67r05p3bdu1o2rff252hqeok.apps.googleusercontent.com",buttonText:"Login",onSuccess:o,cookiePolicy:"single_host_origin",isSignedIn:!0})})}const He="_container_eglo5_1",Ye="_body_eglo5_9",Ke="_title_eglo5_23",je="_text_eglo5_24";function Z(){return e("div",{className:He,children:f("div",{className:Ye,children:[e("p",{className:Ke,children:"Page Not Found"}),e("p",{className:je,children:"Sorry, the requested page was not found."})]})})}const We="_snackbar_inkc3_1";const Xe=({isOpen:t,closeSnackbar:n})=>{const a=h(d=>d.currentGameId),r=(d,u)=>{u!=="clickaway"&&n()},s=()=>"Game Code: "+a,i=e(Y.Fragment,{children:e(K,{size:"small","aria-label":"close",color:"inherit",onClick:r,children:e(j,{fontSize:"small"})})});return e(W,{class:We,open:t,autoHideDuration:5e3,onClose:r,message:s(),action:i})},Je="_box_qihm7_1",Ve="_body_qihm7_7",Qe="_header_qihm7_16",Ze="_message_qihm7_17",et="_button_qihm7_25";const tt={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",p:4},nt=({isOpen:t,closeModal:n,gameResult:o})=>{const a="tie",r="won",s="lost",i=()=>{n()};return e(ye,{className:void 0,open:t,onClose:i,children:e(A,{className:Je,sx:tt,children:f("div",{className:Ve,children:[e("h2",{className:Qe,children:"Game Over"}),e("p",{className:Ze,children:(()=>o===a?"You tied.":o===r?"You won.":o===s?"You lost.":"")()}),e(C,{className:et,variant:"outlined",onClick:i,children:"Dismiss"})]})})})},rt="_board_1mcnc_1";const ot="_gridEmpty_qn3ll_1",at="_gridX_qn3ll_2",st="_gridO_qn3ll_3";function ct({gridNumber:t,handleGameOver:n}){const o=Math.floor(t/3),a=t%3,r="empty",s="player1",i="player2",d="tie",u="won",v="lost",_=h(m=>m.currentUser),g=h(m=>m.currentGameId),[c,U]=b.exports.useState(new J),[R,l]=b.exports.useState(!1),[ee,te]=b.exports.useState("");b.exports.useEffect(()=>{const m=k(G,"games/"+g);ve(m,y=>{if(y.exists()){const p=y.val();U(p)}else return"Game not found"})},[g]);const ne=()=>c[c.currentPlayer].id===_.id,re=()=>{const m=Math.floor(t/3),y=t%3;if(c.board[o][a]===r){let p=c.board;p[m][y]=c.currentPlayer,w({id:g,board:p})}},oe=()=>{let m=null;c.currentPlayer===s&&(m=i),c.currentPlayer===i&&(m=s),w({id:g,currentPlayer:m})},ae=()=>{for(let p in c.board)if(new Set(c.board[p]).size===1&&c.board[p][0]!==r)return c.board[p][0];for(let p in c.board)if(new Set(c.board.map(function(ie){return ie[p]})).size===1&&c.board[0][p]!==r)return c.board[0][p];let m=new Set;if(m.add(c.board[0][0]),m.add(c.board[1][1]),m.add(c.board[2][2]),m.size===1&&c.board[0][0]!==r)return c.board[0][0];let y=new Set;if(y.add(c.board[0][2]),y.add(c.board[1][1]),y.add(c.board[2][0]),y.size===1&&c.board[0][2]!==r)return c.board[0][2];for(let p in c.board)for(let N in p)if(c.board[p][N]===r)return;return d},se=()=>{const m=ae();if(m===d){n(d);return}m===s&&(c.player1.id===_.id?n(u):n(v)),m===i&&(c.player2.id===_.id?n(u):n(v))},ce=()=>{ne()?(re(),oe(),se()):(te("Not your turn"),l(!0))};return f(S,{children:[e("div",{className:c.board[o][a]===r?ot:c.board[o][a]===s?st:at,onClick:()=>ce()}),e(V,{isOpen:R,closeSnackbar:l,message:ee})]})}function it(){const t=h(_=>_.currentGameId),n=h(_=>_.setCurrentGameId),o=h(_=>_.setCurrentPath),[a,r]=b.exports.useState(""),[s,i]=b.exports.useState(!1),d=E(),u=_=>{w({id:t,isActive:!1}),r(_),i(!0)},v=()=>{i(!1),n(null),o(I.path),d(I.path)};return f(S,{children:[e("div",{className:rt,children:[...Array(9)].map((_,g)=>e(ct,{gridNumber:g,handleGameOver:u},g))}),e(nt,{isOpen:s,closeModal:v,gameResult:a})]})}const lt="_container_kl1fb_1";function dt(){const[t,n]=b.exports.useState(!0);return f(S,{children:[e("div",{className:lt,children:e(it,{})}),e(Xe,{isOpen:t,closeSnackbar:n})]})}const ut={path:"/login",component:e(Q,{})},I={path:"/home",component:e($,{})},M={path:"/play",component:e(dt,{})},mt={path:"/pageNotFound",component:e(Z,{})},O=[ut,I,M,mt];function ht(){const t=h(o=>o.currentUser),n=h(o=>o.currentGameId);return f(Se,{children:[t?e(S,{children:n?f(S,{children:[e(x,{path:"/",element:e($,{})}),O.map((o,a)=>e(x,{path:o.path,element:o.component},a))]}):f(S,{children:[e(x,{path:"/",element:e($,{})}),O.map((o,a)=>e(x,{path:o.path,element:e(z,{to:"/"})},a))]})}):f(S,{children:[e(x,{path:"/",element:e(Q,{})}),O.map((o,a)=>e(x,{path:o.path,element:e(z,{to:"/"})},a))]}),e(x,{path:"*",element:e(Z,{})})]})}const pt={name:"GitHub",link:"https://github.com/cameronmathis/tac.io",icon:e(xe,{fontSize:"large"})},_t=[pt],bt="_footer_2vabq_1",ft="_item_2vabq_11";const gt=()=>e("div",{className:bt,children:_t.map(t=>e("a",{className:ft,target:"blank",href:t.link,children:t.icon},"{item}"))}),yt="_header_187o3_1",vt="_title_187o3_11";const St="_left_187o3_26",xt="_right_187o3_27";const kt={text:"Home",path:I.path},Gt={text:"Play",path:M.path},Nt=[kt,Gt],Ct="_menu_1dl5p_1",wt="_box_1dl5p_5",It="_boxSelected_1dl5p_6",Mt="_link_1dl5p_20",Pt="_linkSelected_1dl5p_25";const Ot=({menuItems:t,getRandomKey:n,handleClick:o})=>{const a=h(r=>r.currentPath);return e("div",{className:Ct,children:t==null?void 0:t.map(r=>e(A,{className:a===r.path?It:wt,onClick:()=>o(r),children:e(X,{variant:"inherit",className:a===r.path?Pt:Mt,children:e("h3",{children:r.text})})},n(r.text)))})},$t="_menu_wbw6z_1",Et="_menuButton_wbw6z_9",At="_menuIcon_wbw6z_14",Ut="_drawer_wbw6z_20",Rt="_box_wbw6z_29",Tt="_boxSelected_wbw6z_30",Lt="_link_wbw6z_37",zt="_linkSelected_wbw6z_42";const Bt=({menuItems:t,getRandomKey:n,handleClick:o})=>{const a=h(u=>u.currentPath),[r,s]=b.exports.useState(!1),i=()=>{s(u=>!u)},d=u=>{i(),o(u)};return f("div",{className:$t,children:[e(C,{className:Et,onClick:i,children:e(ke,{className:At})}),e(Ge,{anchor:"right",open:r,onClose:()=>s(!1),children:e(Ne,{square:!0,elevation:0,className:Ut,children:t==null?void 0:t.map(u=>e(A,{className:a===u.path?Tt:Rt,onClick:()=>d(u),children:e(X,{variant:"inherit",className:a===u.path?zt:Lt,children:e("h2",{children:u.text})})},n(u.text)))})})]})},Ft=()=>{const t=h(d=>d.currentPath),n=h(d=>d.setCurrentPath),o=h(d=>d.isMobile),a=E(),i={menuItems:Nt,getRandomKey:()=>Math.random().toString(36).substring(2,5),handleClick:d=>{t!==d.path&&(n(d.path),a(d.path))}};return e("div",{children:o?e(Bt,P({},i)):e(Ot,P({},i))})},qt=()=>f("div",{className:yt,children:[e("div",{className:St,children:e("div",{className:vt})}),e("div",{className:xt,children:e(Ft,{})})]}),Dt="_body_1dwt0_1",Ht="_footer_1dwt0_7";function Yt(){const t=h(a=>a.setIsMobile),[n,o]=b.exports.useState(!0);return b.exports.useEffect(()=>{window.addEventListener("resize",()=>t(window.innerWidth<765)),window.addEventListener("resize",()=>o(window.innerHeight>750))},[t]),e("div",{className:Dt,children:f(Ce,{children:[e(qt,{}),e(ht,{}),n?e(gt,{}):e("div",{className:Ht})]})})}const Kt="modulepreload",F={},jt="/tac.io/",Wt=function(n,o){return!o||o.length===0?n():Promise.all(o.map(a=>{if(a=`${jt}${a}`,a in F)return;F[a]=!0;const r=a.endsWith(".css"),s=r?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${a}"]${s}`))return;const i=document.createElement("link");if(i.rel=r?"stylesheet":Kt,r||(i.as="script",i.crossOrigin=""),i.href=a,document.head.appendChild(i),r)return new Promise((d,u)=>{i.addEventListener("load",d),i.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${a}`)))})})).then(()=>n())},Xt=t=>{t&&t instanceof Function&&Wt(()=>import("./web-vitals.d62816c8.js"),[]).then(({getCLS:n,getFID:o,getFCP:a,getLCP:r,getTTFB:s})=>{n(t),o(t),a(t),r(t),s(t)})};we.render(e(Ie,{injectFirst:!0,children:e(Yt,{})}),document.getElementById("root"));Xt();
