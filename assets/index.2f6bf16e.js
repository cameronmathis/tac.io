var pe=Object.defineProperty;var Y=Object.getOwnPropertySymbols;var fe=Object.prototype.hasOwnProperty,be=Object.prototype.propertyIsEnumerable;var W=(n,r,a)=>r in n?pe(n,r,{enumerable:!0,configurable:!0,writable:!0,value:a}):n[r]=a,B=(n,r)=>{for(var a in r||(r={}))fe.call(r,a)&&W(n,a,r[a]);if(Y)for(var a of Y(r))be.call(r,a)&&W(n,a,r[a]);return n};import{v as ge,i as xe,g as ve,a as Z,c as ee,r as C,s as D,u as ye,j as t,R as te,I as ne,d as re,S as ae,b as Se,e as p,f as H,h as b,F as y,T as Ge,B as A,k as Ne,M as ke,l as j,o as Ce,m as we,n as N,N as X,p as Oe,q as oe,t as Ee,D as Ie,P as Me,H as Pe,w as $e,x as Ae}from"./vendor.2b3f8d74.js";const Ue=function(){const r=document.createElement("link").relList;if(r&&r.supports&&r.supports("modulepreload"))return;for(const e of document.querySelectorAll('link[rel="modulepreload"]'))o(e);new MutationObserver(e=>{for(const s of e)if(s.type==="childList")for(const l of s.addedNodes)l.tagName==="LINK"&&l.rel==="modulepreload"&&o(l)}).observe(document,{childList:!0,subtree:!0});function a(e){const s={};return e.integrity&&(s.integrity=e.integrity),e.referrerpolicy&&(s.referrerPolicy=e.referrerpolicy),e.crossorigin==="use-credentials"?s.credentials="include":e.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(e){if(e.ep)return;e.ep=!0;const s=a(e);fetch(e.href,s)}};Ue();const k="empty",P="player1",T="player2";function se(){this.board=[["empty","empty","empty"],["empty","empty","empty"],["empty","empty","empty"]]}function ce(){this.board=new se().board,this.currentPlayer=Math.random()<.5?P:T,this.id=ge().substring(0,5),this.isActive=!1,this.player1={gameScore:0,id:null,name:null,symbol:"x"},this.player2={gameScore:0,id:null,name:null,symbol:"o"},this.winner=null}const Te={apiKey:"AIzaSyBlozCM8uRov_73nBj-fk5VF70h0Ysr060",authDomain:"tacio-clmat.firebaseapp.com",databaseURL:"https://tacio-clmat-default-rtdb.firebaseio.com",projectId:"tacio-clmat",storageBucket:"tacio-clmat.appspot.com",messagingSenderId:"3090956232",appId:"1:3090956232:web:777eeb27c7610d47798afd",measurementId:"G-JE4QX5ZD7X"},ze=xe(Te),w=ve(ze);function Le(n){return Z(ee(C(w),`games/${n.id}`)).then(r=>{if(r.exists())return"Game already exists";D(C(w,"games/"+n.id),n)}).catch(r=>{console.error(r)})}function Re(n){return Z(ee(C(w),`games/${n}`)).then(r=>r.exists()?r.val():"Game not found").catch(r=>{console.error(r)})}function $(n){ye(C(w,"games/"+n.id),n)}function Be(n){D(C(w,"games/"+n),{})}const Fe="_snackbar_37jxt_1";const K=({isOpen:n,closeSnackbar:r,message:a})=>{const e=(l,d)=>{d!=="clickaway"&&r()},s=t(te.Fragment,{children:t(ne,{size:"small","aria-label":"close",color:"inherit",onClick:e,children:t(re,{fontSize:"small"})})});return t(ae,{className:Fe,open:n,autoHideDuration:5e3,onClose:e,message:a,action:s})},m=Se(n=>({currentPath:"/home",setCurrentPath:r=>n(()=>({currentPath:r})),isMobile:null,setIsMobile:r=>n(()=>({isMobile:r})),currentUser:null,setCurrentUser:r=>n(()=>({currentUser:r})),currentGameId:null,setCurrentGameId:r=>n(()=>({currentGameId:r}))})),qe="_container_3i0ux_1",De="_body_3i0ux_17";const He="_textField_3i0ux_43",J="_button_3i0ux_45";function q(){const r=m(i=>i.currentUser),a=m(i=>i.currentGameId),o=m(i=>i.setCurrentGameId),e=m(i=>i.setCurrentPath),[s,l]=p.exports.useState(""),[d,u]=p.exports.useState(""),[S,g]=p.exports.useState(!1),G=H();p.exports.useEffect(()=>{l(a||"")},[a]);const x=i=>{l(i.target.value.trim())},f=i=>{o(i.id),e(R.path),G(R.path)};return b(y,{children:[t("div",{className:qe,children:b("div",{className:De,children:[t(Ge,{className:He,id:"filled-hidden-label-small",label:"Game Code",value:s,onChange:x}),t(A,{className:J,variant:"outlined",onClick:()=>{if(s.length!==5){u("Invalid game code"),g(!0);return}Re(s).then(i=>{if(i==="Game not found"){u("Game not found"),g(!0);return}if(!i.isActive){u("Game is not currently active"),g(!0);return}if(i.player1.id===r.id||i.player2.id===r.id){f(i);return}else if(i.player2.id!==void 0){u("Game already has two players"),g(!0);return}i.player2.id=r.id,i.player2.name=r.name,$(i),f(i)})},children:"Join Game"}),t(A,{className:J,variant:"outlined",onClick:()=>{let i=new ce;i.isActive=!0,i.player1.id=r.id,i.player1.name=r.name,Le(i).then(()=>{f(i)})},children:"Create Game"})]})}),t(K,{isOpen:S,closeSnackbar:g,message:d})]})}function je(){this.email=null,this.id=null,this.name=null}function Ke(n){D(C(w,"users/"+n.id),n)}const Ye="_container_94gos_1",We="_button_94gos_17";function ie(){const n=m(o=>o.setCurrentUser),r=o=>{let e=new je;return e.email=o.email,e.id=o.googleId,e.name=o.givenName,e},a=o=>{let e=o.profileObj,s=r(e);Ke(s),n(s)};return t("div",{className:Ye,children:t(Ne.exports.GoogleLogin,{className:We,clientId:"3090956232-ce08f1dh67r05p3bdu1o2rff252hqeok.apps.googleusercontent.com",buttonText:"Login",onSuccess:a,cookiePolicy:"single_host_origin",isSignedIn:!0})})}const Xe="_container_yihnz_1",Je="_body_yihnz_17",Ve="_title_yihnz_45",Qe="_text_yihnz_47";function le(){return t("div",{className:Xe,children:b("div",{className:Je,children:[t("p",{className:Ve,children:"Page Not Found"}),t("p",{className:Qe,children:"Sorry, the requested page was not found."})]})})}const Ze="_snackbar_xq900_1";const et=({isOpen:n,closeSnackbar:r})=>{const o=m(d=>d.currentGameId),e=(d,u)=>{u!=="clickaway"&&r()},s=()=>"Game Code: "+o,l=t(te.Fragment,{children:t(ne,{size:"small","aria-label":"close",color:"inherit",onClick:e,children:t(re,{fontSize:"small"})})});return t(ae,{className:Ze,open:n,autoHideDuration:5e3,onClose:e,message:s(),action:l})},v="tie",M="won",z="lost",tt="_box_1b82x_1",nt="_body_1b82x_15",rt="_header_1b82x_33",at="_message_1b82x_35",ot="_buttons_1b82x_51",V="_button_1b82x_51";const st={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",p:4},ct=({isOpen:n,newGame:r,endGame:a,gameResult:o})=>t(ke,{className:void 0,open:n,children:t(j,{className:tt,sx:st,children:b("div",{className:nt,children:[t("h2",{className:rt,children:"Game Over"}),t("p",{className:at,children:(()=>o===v?"You tied.":o===M?"You won.":o===z?"You lost.":"")()}),b("div",{className:ot,children:[t(A,{className:V,variant:"outlined",onClick:r,children:"New Game"}),t(A,{className:V,variant:"outlined",onClick:a,children:"End Game"})]})]})})}),it="_board_1piba_1";const lt="_gridEmpty_15gh2_1",dt="_gridX_15gh2_3",ut="_gridO_15gh2_5";function mt({gridNumber:n,gridState:r,game:a,handlePlay:o}){const e=m(f=>f.currentGameId),s=m(f=>f.currentUser),[l,d]=p.exports.useState(""),[u,S]=p.exports.useState(!1),g=()=>a[a.currentPlayer].id===s.id,G=()=>{const f=Math.floor(n/3),U=n%3;if(!!a.isActive&&r===k){let O=a.board;O[f][U]=a.currentPlayer,$({id:e,board:O})}},x=()=>{console.log(a),g()?(G(),o()):(d("Not your turn"),S(!0))};return b(y,{children:[t("div",{className:r===k?lt:r===P?ut:dt,onClick:()=>x()}),t(K,{isOpen:u,closeSnackbar:S,message:l})]})}function ht(){const n=m(c=>c.currentGameId),r=m(c=>c.setCurrentGameId),a=m(c=>c.currentUser),o=m(c=>c.setCurrentPath),[e,s]=p.exports.useState(new ce),[l,d]=p.exports.useState(""),[u,S]=p.exports.useState(!1),[g,G]=p.exports.useState(""),[x,f]=p.exports.useState(!1),U=H();p.exports.useEffect(()=>{const c=C(w,"games/"+n);Ce(c,_=>{if(_.exists()){let h=_.val();if(h.winner!==void 0){const I=h.winner===v?v:h.winner===a.id?M:z;G(I),f(!0)}else s(h)}else x||(console.log(!x),d("Error loading game"),S(!0))})},[n,a,x]);const O=()=>{let c=null;e.currentPlayer===P&&(c=T),e.currentPlayer===T&&(c=P),$({id:n,currentPlayer:c})},i=()=>{for(let h in e.board)if(new Set(e.board[h]).size===1&&e.board[h][0]!==k)return e.board[h][0];for(let h in e.board)if(new Set(e.board.map(function(_e){return _e[h]})).size===1&&e.board[0][h]!==k)return e.board[0][h];let c=new Set;if(c.add(e.board[0][0]),c.add(e.board[1][1]),c.add(e.board[2][2]),c.size===1&&e.board[0][0]!==k)return e.board[0][0];let _=new Set;if(_.add(e.board[0][2]),_.add(e.board[1][1]),_.add(e.board[2][0]),_.size===1&&e.board[0][2]!==k)return e.board[0][2];for(let h in e.board)for(let I in e.board[h])if(e.board[h][I]===k)return;return v},E=c=>{let _=null;const h=c===v?v:c===M?a.id:null;h!==null?_={id:n,isActive:!1,winner:h}:_={id:n,isActive:!1},$(_),G(c),f(!0)},de=()=>{const c=i();if(c===v){E(v);return}c===P&&(e.player1.id===a.id?E(M):E(z)),c===T&&(e.player2.id===a.id?E(M):E(z))},ue=()=>{e.isActive&&O(),de()},me=()=>{let c=e;c.board=new se().board,c.isActive=!0,c.winner=null,$(c),f(!1),G("")},he=()=>{Be(n),r(null),f(!1),o(L.path),U(L.path)};return b(y,{children:[t("div",{className:it,children:[...Array(9)].map((c,_)=>t(mt,{gridNumber:_,gridState:e.board[Math.floor(_/3)][_%3],game:e,handlePlay:ue},_))}),t(K,{isOpen:u,closeSnackbar:S,message:l}),t(ct,{isOpen:x,newGame:me,endGame:he,gameResult:g})]})}const _t="_container_1r1x9_1";function pt(){const[n,r]=p.exports.useState(!0);return b(y,{children:[t("div",{className:_t,children:t(ht,{})}),t(et,{isOpen:n,closeSnackbar:r})]})}const ft={path:"/login",component:t(ie,{})},L={path:"/home",component:t(q,{})},R={path:"/play",component:t(pt,{})},bt={path:"/pageNotFound",component:t(le,{})},F=[ft,L,R,bt];function gt(){const n=m(a=>a.currentUser),r=m(a=>a.currentGameId);return b(we,{children:[n?t(y,{children:r?b(y,{children:[t(N,{path:"/",element:t(q,{})}),F.map((a,o)=>t(N,{path:a.path,element:a.component},o))]}):b(y,{children:[t(N,{path:"/",element:t(q,{})}),F.map((a,o)=>t(N,{path:a.path,element:t(X,{to:"/"})},o))]})}):b(y,{children:[t(N,{path:"/",element:t(ie,{})}),F.map((a,o)=>t(N,{path:a.path,element:t(X,{to:"/"})},o))]}),t(N,{path:"*",element:t(le,{})})]})}const xt={name:"GitHub",link:"https://github.com/cameronmathis/tac.io",icon:t(Oe,{fontSize:"large"})},vt=[xt],yt="_footer_f9jvd_1",St="_item_f9jvd_21";const Gt=()=>t("div",{className:yt,children:vt.map(n=>t("a",{className:St,target:"blank",href:n.link,children:n.icon},"{item}"))}),Nt="_header_1mzc8_1",kt="_title_1mzc8_21";const Ct="_left_1mzc8_51",wt="_right_1mzc8_53";const Ot={text:"Home",path:L.path},Et={text:"Play",path:R.path},It=[Ot,Et],Mt="_menu_tqxq9_1",Pt="_box_tqxq9_9",$t="_boxSelected_tqxq9_11",At="_link_tqxq9_39",Ut="_linkSelected_tqxq9_49";const Tt=({menuItems:n,getRandomKey:r,handleClick:a})=>{const o=m(e=>e.currentPath);return t("div",{className:Mt,children:n==null?void 0:n.map(e=>t(j,{className:o===e.path?$t:Pt,onClick:()=>a(e),children:t(oe,{variant:"inherit",className:o===e.path?Ut:At,children:t("h3",{children:e.text})})},r(e.text)))})},zt="_menu_1t4ch_1",Lt="_menuButton_1t4ch_17",Rt="_menuIcon_1t4ch_27",Bt="_drawer_1t4ch_39",Ft="_box_1t4ch_57",qt="_boxSelected_1t4ch_59",Dt="_link_1t4ch_73",Ht="_linkSelected_1t4ch_83";const jt=({menuItems:n,getRandomKey:r,handleClick:a})=>{const o=m(u=>u.currentPath),[e,s]=p.exports.useState(!1),l=()=>{s(u=>!u)},d=u=>{l(),a(u)};return b("div",{className:zt,children:[t(A,{className:Lt,onClick:l,children:t(Ee,{className:Rt})}),t(Ie,{anchor:"right",open:e,onClose:()=>s(!1),children:t(Me,{square:!0,elevation:0,className:Bt,children:n==null?void 0:n.map(u=>t(j,{className:o===u.path?qt:Ft,onClick:()=>d(u),children:t(oe,{variant:"inherit",className:o===u.path?Ht:Dt,children:t("h2",{children:u.text})})},r(u.text)))})})]})},Kt=()=>{const n=m(d=>d.currentPath),r=m(d=>d.setCurrentPath),a=m(d=>d.isMobile),o=H(),l={menuItems:It,getRandomKey:()=>Math.random().toString(36).substring(2,5),handleClick:d=>{n!==d.path&&(r(d.path),o(d.path))}};return t("div",{children:a?t(jt,B({},l)):t(Tt,B({},l))})},Yt=()=>b("div",{className:Nt,children:[t("div",{className:Ct,children:t("div",{className:kt})}),t("div",{className:wt,children:t(Kt,{})})]}),Wt="_body_1c47j_1",Xt="_footer_1c47j_13";function Jt(){const n=m(o=>o.setIsMobile),[r,a]=p.exports.useState(!0);return p.exports.useEffect(()=>{window.addEventListener("resize",()=>n(window.innerWidth<765)),window.addEventListener("resize",()=>a(window.innerHeight>750))},[n]),t("div",{className:Wt,children:b(Pe,{children:[t(Yt,{}),t(gt,{}),r?t(Gt,{}):t("div",{className:Xt})]})})}const Vt="modulepreload",Q={},Qt="/tac.io/",Zt=function(r,a){return!a||a.length===0?r():Promise.all(a.map(o=>{if(o=`${Qt}${o}`,o in Q)return;Q[o]=!0;const e=o.endsWith(".css"),s=e?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${s}`))return;const l=document.createElement("link");if(l.rel=e?"stylesheet":Vt,e||(l.as="script",l.crossOrigin=""),l.href=o,document.head.appendChild(l),e)return new Promise((d,u)=>{l.addEventListener("load",d),l.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>r())},en=n=>{n&&n instanceof Function&&Zt(()=>import("./web-vitals.d62816c8.js"),[]).then(({getCLS:r,getFID:a,getFCP:o,getLCP:e,getTTFB:s})=>{r(n),a(n),o(n),e(n),s(n)})};$e.render(t(Ae,{injectFirst:!0,children:t(Jt,{})}),document.getElementById("root"));en();
