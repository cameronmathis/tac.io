var ue=Object.defineProperty;var F=Object.getOwnPropertySymbols;var me=Object.prototype.hasOwnProperty,he=Object.prototype.propertyIsEnumerable;var q=(t,n,r)=>n in t?ue(t,n,{enumerable:!0,configurable:!0,writable:!0,value:r}):t[n]=r,U=(t,n)=>{for(var r in n||(n={}))me.call(n,r)&&q(t,r,n[r]);if(F)for(var r of F(n))he.call(n,r)&&q(t,r,n[r]);return t};import{v as _e,i as pe,g as fe,a as K,c as W,r as k,s as be,u as X,j as e,R as J,I as V,d as Q,S as Z,b as ge,e as f,f as L,h as _,F as v,T as ye,B as O,k as ve,M as xe,l as z,o as Ge,m as Se,n as x,N as D,p as ke,q as ee,t as Ne,D as Ce,P as Ee,H as Ie,w as Oe,x as Pe}from"./vendor.2b3f8d74.js";const we=function(){const n=document.createElement("link").relList;if(n&&n.supports&&n.supports("modulepreload"))return;for(const a of document.querySelectorAll('link[rel="modulepreload"]'))o(a);new MutationObserver(a=>{for(const s of a)if(s.type==="childList")for(const c of s.addedNodes)c.tagName==="LINK"&&c.rel==="modulepreload"&&o(c)}).observe(document,{childList:!0,subtree:!0});function r(a){const s={};return a.integrity&&(s.integrity=a.integrity),a.referrerpolicy&&(s.referrerPolicy=a.referrerpolicy),a.crossorigin==="use-credentials"?s.credentials="include":a.crossorigin==="anonymous"?s.credentials="omit":s.credentials="same-origin",s}function o(a){if(a.ep)return;a.ep=!0;const s=r(a);fetch(a.href,s)}};we();function te(){this.board=[["empty","empty","empty"],["empty","empty","empty"],["empty","empty","empty"]]}const Me="player1",$e="player2";function ne(){this.board=new te().board,this.currentPlayer=Math.random()<.5?Me:$e,this.id=_e().substring(0,5),this.isActive=!1,this.player1={gameScore:0,id:null,name:null,symbol:"x"},this.player2={gameScore:0,id:null,name:null,symbol:"o"},this.winner=null}const Ae={apiKey:"AIzaSyBlozCM8uRov_73nBj-fk5VF70h0Ysr060",authDomain:"tacio-clmat.firebaseapp.com",databaseURL:"https://tacio-clmat-default-rtdb.firebaseio.com",projectId:"tacio-clmat",storageBucket:"tacio-clmat.appspot.com",messagingSenderId:"3090956232",appId:"1:3090956232:web:777eeb27c7610d47798afd",measurementId:"G-JE4QX5ZD7X"},Ue=pe(Ae),N=fe(Ue);function Re(t){K(W(k(N),`games/${t.id}`)).then(n=>{if(n.exists())return"Game already exists";be(k(N,"games/"+t.id),t)}).catch(n=>{console.error(n)})}function Te(t){return K(W(k(N),`games/${t}`)).then(n=>n.exists()?n.val():"Game not found").catch(n=>{console.error(n)})}function S(t){X(k(N,"games/"+t.id),t)}const Le="_snackbar_1ukc2_1";const re=({isOpen:t,closeSnackbar:n,message:r})=>{const a=(c,m)=>{m!=="clickaway"&&n()},s=e(J.Fragment,{children:e(V,{size:"small","aria-label":"close",color:"inherit",onClick:a,children:e(Q,{fontSize:"small"})})});return e(Z,{class:Le,open:t,autoHideDuration:5e3,onClose:a,message:r,action:s})},h=ge(t=>({currentPath:"/home",setCurrentPath:n=>t(()=>({currentPath:n})),isMobile:null,setIsMobile:n=>t(()=>({isMobile:n})),currentUser:null,setCurrentUser:n=>t(()=>({currentUser:n})),currentGameId:null,setCurrentGameId:n=>t(()=>({currentGameId:n}))})),ze="_container_3i0ux_1",Be="_body_3i0ux_17";const Fe="_textField_3i0ux_43",H="_button_3i0ux_45";function T(){const n=h(l=>l.currentUser),r=h(l=>l.currentGameId),o=h(l=>l.setCurrentGameId),a=h(l=>l.setCurrentPath),[s,c]=f.exports.useState(""),[m,u]=f.exports.useState(!1),[G,i]=f.exports.useState(""),C=L();f.exports.useEffect(()=>{c(r||"")},[r]);const E=l=>{c(l.target.value.trim())},y=l=>{o(l.id),a($.path),C($.path)};return _(v,{children:[e("div",{className:ze,children:_("div",{className:Be,children:[e(ye,{className:Fe,id:"filled-hidden-label-small",label:"Game Code",value:s,onChange:E}),e(O,{className:H,variant:"outlined",onClick:()=>{if(s.length!==5){i("Invalid game code"),u(!0);return}Te(s).then(l=>{if(l==="Game not found"){i("Game not found"),u(!0);return}if(!l.isActive){i("Game is not currently active"),u(!0);return}if(l.player1.id===n.id||l.player2.id===n.id){y(l);return}else if(l.player2.id!==void 0){i("Game already has two players"),u(!0);return}l.player2.id=n.id,l.player2.name=n.name,S(l),y(l)})},children:"Join Game"}),e(O,{className:H,variant:"outlined",onClick:()=>{let l=new ne;l.isActive=!0,l.player1.id=n.id,l.player1.name=n.name,Re(l),y(l)},children:"Create Game"})]})}),e(re,{isOpen:m,closeSnackbar:u,message:G})]})}function qe(){this.email=null,this.id=null,this.name=null}function De(t){X(k(N,"users/"+t.id),t)}const He="_container_94gos_1",Ye="_button_94gos_17";function ae(){const t=h(o=>o.setCurrentUser),n=o=>{let a=new qe;return a.email=o.email,a.id=o.googleId,a.name=o.givenName,a},r=o=>{let a=o.profileObj,s=n(a);De(s),t(s)};return e("div",{className:He,children:e(ve.exports.GoogleLogin,{className:Ye,clientId:"3090956232-ce08f1dh67r05p3bdu1o2rff252hqeok.apps.googleusercontent.com",buttonText:"Login",onSuccess:r,cookiePolicy:"single_host_origin",isSignedIn:!0})})}const je="_container_yihnz_1",Ke="_body_yihnz_17",We="_title_yihnz_45",Xe="_text_yihnz_47";function oe(){return e("div",{className:je,children:_("div",{className:Ke,children:[e("p",{className:We,children:"Page Not Found"}),e("p",{className:Xe,children:"Sorry, the requested page was not found."})]})})}const Je="_snackbar_1l0vu_1";const Ve=({isOpen:t,closeSnackbar:n})=>{const o=h(m=>m.currentGameId),a=(m,u)=>{u!=="clickaway"&&n()},s=()=>"Game Code: "+o,c=e(J.Fragment,{children:e(V,{size:"small","aria-label":"close",color:"inherit",onClick:a,children:e(Q,{fontSize:"small"})})});return e(Z,{class:Je,open:t,autoHideDuration:5e3,onClose:a,message:s(),action:c})},Qe="_box_k5ech_1",Ze="_body_k5ech_15",et="_header_k5ech_33",tt="_message_k5ech_35",nt="_buttons_k5ech_51",Y="_button_k5ech_51";const rt={position:"absolute",top:"50%",left:"50%",transform:"translate(-50%, -50%)",p:4},at=({isOpen:t,newGame:n,endGame:r,gameResult:o})=>{const a="tie",s="won",c="lost";return e(xe,{className:void 0,open:t,children:e(z,{className:Qe,sx:rt,children:_("div",{className:Ze,children:[e("h2",{className:et,children:"Game Over"}),e("p",{className:tt,children:(()=>o===a?"You tied.":o===s?"You won.":o===c?"You lost.":"")()}),_("div",{className:nt,children:[e(O,{className:Y,variant:"outlined",onClick:n,children:"New Game"}),e(O,{className:Y,variant:"outlined",onClick:r,children:"End Game"})]})]})})})},ot="_board_1piba_1";const st="_gridEmpty_15gh2_1",ct="_gridX_15gh2_3",it="_gridO_15gh2_5";function lt({gridNumber:t,gridState:n,game:r,handlePlay:o}){const a="empty",s="player1",c=h(g=>g.currentGameId),m=h(g=>g.currentUser),[u,G]=f.exports.useState(!1),[i,C]=f.exports.useState(""),E=()=>r[r.currentPlayer].id===m.id,y=()=>{const g=Math.floor(t/3),l=t%3;if(!!r.isActive&&n===a){let w=r.board;w[g][l]=r.currentPlayer,S({id:c,board:w})}},P=()=>{E()?(y(),o()):(C("Not your turn"),G(!0))};return _(v,{children:[e("div",{className:n===a?st:n===s?it:ct,onClick:()=>P()}),e(re,{isOpen:u,closeSnackbar:G,message:i})]})}function dt(){const t="empty",n="player1",r="player2",o="tie",a="won",s="lost",c=h(d=>d.currentGameId),m=h(d=>d.setCurrentGameId),u=h(d=>d.currentUser),G=h(d=>d.setCurrentPath),[i,C]=f.exports.useState(new ne),[E,y]=f.exports.useState(""),[P,g]=f.exports.useState(!1),l=L();f.exports.useEffect(()=>{const d=k(N,"games/"+c);Ge(d,p=>{if(p.exists()){let b=p.val();C(b)}else return"Game not found"})},[c]);const w=()=>{let d=null;i.currentPlayer===n&&(d=r),i.currentPlayer===r&&(d=n),S({id:c,currentPlayer:d})},B=()=>{for(let b in i.board)if(new Set(i.board[b]).size===1&&i.board[b][0]!==t)return i.board[b][0];for(let b in i.board)if(new Set(i.board.map(function(de){return de[b]})).size===1&&i.board[0][b]!==t)return i.board[0][b];let d=new Set;if(d.add(i.board[0][0]),d.add(i.board[1][1]),d.add(i.board[2][2]),d.size===1&&i.board[0][0]!==t)return i.board[0][0];let p=new Set;if(p.add(i.board[0][2]),p.add(i.board[1][1]),p.add(i.board[2][0]),p.size===1&&i.board[0][2]!==t)return i.board[0][2];for(let b in i.board)for(let A in i.board[b])if(i.board[b][A]===t)return;return o},se=()=>{const d=B();if(d===o){I(o);return}d===n&&(i.player1.id===u.id?I(a):I(s)),d===r&&(i.player2.id===u.id?I(a):I(s))},I=d=>{S({id:c,isActive:!1}),y(d),g(!0)},ce=()=>{w(),se()},ie=()=>{let d={id:c,isActive:!0,board:new te().board};S(d),g(!1),y("")},le=()=>{S({id:c,isActive:!1}),m(null),g(!1),G(M.path),l(M.path)};return _(v,{children:[e("div",{className:ot,children:[...Array(9)].map((d,p)=>e(lt,{gridNumber:p,gridState:i.board[Math.floor(p/3)][p%3],game:i,handlePlay:ce},p))}),e(at,{isOpen:P,newGame:ie,endGame:le,gameResult:E})]})}const ut="_container_1r1x9_1";function mt(){const[t,n]=f.exports.useState(!0);return _(v,{children:[e("div",{className:ut,children:e(dt,{})}),e(Ve,{isOpen:t,closeSnackbar:n})]})}const ht={path:"/login",component:e(ae,{})},M={path:"/home",component:e(T,{})},$={path:"/play",component:e(mt,{})},_t={path:"/pageNotFound",component:e(oe,{})},R=[ht,M,$,_t];function pt(){const t=h(r=>r.currentUser),n=h(r=>r.currentGameId);return _(Se,{children:[t?e(v,{children:n?_(v,{children:[e(x,{path:"/",element:e(T,{})}),R.map((r,o)=>e(x,{path:r.path,element:r.component},o))]}):_(v,{children:[e(x,{path:"/",element:e(T,{})}),R.map((r,o)=>e(x,{path:r.path,element:e(D,{to:"/"})},o))]})}):_(v,{children:[e(x,{path:"/",element:e(ae,{})}),R.map((r,o)=>e(x,{path:r.path,element:e(D,{to:"/"})},o))]}),e(x,{path:"*",element:e(oe,{})})]})}const ft={name:"GitHub",link:"https://github.com/cameronmathis/tac.io",icon:e(ke,{fontSize:"large"})},bt=[ft],gt="_footer_f9jvd_1",yt="_item_f9jvd_21";const vt=()=>e("div",{className:gt,children:bt.map(t=>e("a",{className:yt,target:"blank",href:t.link,children:t.icon},"{item}"))}),xt="_header_1mzc8_1",Gt="_title_1mzc8_21";const St="_left_1mzc8_51",kt="_right_1mzc8_53";const Nt={text:"Home",path:M.path},Ct={text:"Play",path:$.path},Et=[Nt,Ct],It="_menu_tqxq9_1",Ot="_box_tqxq9_9",Pt="_boxSelected_tqxq9_11",wt="_link_tqxq9_39",Mt="_linkSelected_tqxq9_49";const $t=({menuItems:t,getRandomKey:n,handleClick:r})=>{const o=h(a=>a.currentPath);return e("div",{className:It,children:t==null?void 0:t.map(a=>e(z,{className:o===a.path?Pt:Ot,onClick:()=>r(a),children:e(ee,{variant:"inherit",className:o===a.path?Mt:wt,children:e("h3",{children:a.text})})},n(a.text)))})},At="_menu_1t4ch_1",Ut="_menuButton_1t4ch_17",Rt="_menuIcon_1t4ch_27",Tt="_drawer_1t4ch_39",Lt="_box_1t4ch_57",zt="_boxSelected_1t4ch_59",Bt="_link_1t4ch_73",Ft="_linkSelected_1t4ch_83";const qt=({menuItems:t,getRandomKey:n,handleClick:r})=>{const o=h(u=>u.currentPath),[a,s]=f.exports.useState(!1),c=()=>{s(u=>!u)},m=u=>{c(),r(u)};return _("div",{className:At,children:[e(O,{className:Ut,onClick:c,children:e(Ne,{className:Rt})}),e(Ce,{anchor:"right",open:a,onClose:()=>s(!1),children:e(Ee,{square:!0,elevation:0,className:Tt,children:t==null?void 0:t.map(u=>e(z,{className:o===u.path?zt:Lt,onClick:()=>m(u),children:e(ee,{variant:"inherit",className:o===u.path?Ft:Bt,children:e("h2",{children:u.text})})},n(u.text)))})})]})},Dt=()=>{const t=h(m=>m.currentPath),n=h(m=>m.setCurrentPath),r=h(m=>m.isMobile),o=L(),c={menuItems:Et,getRandomKey:()=>Math.random().toString(36).substring(2,5),handleClick:m=>{t!==m.path&&(n(m.path),o(m.path))}};return e("div",{children:r?e(qt,U({},c)):e($t,U({},c))})},Ht=()=>_("div",{className:xt,children:[e("div",{className:St,children:e("div",{className:Gt})}),e("div",{className:kt,children:e(Dt,{})})]}),Yt="_body_1c47j_1",jt="_footer_1c47j_13";function Kt(){const t=h(o=>o.setIsMobile),[n,r]=f.exports.useState(!0);return f.exports.useEffect(()=>{window.addEventListener("resize",()=>t(window.innerWidth<765)),window.addEventListener("resize",()=>r(window.innerHeight>750))},[t]),e("div",{className:Yt,children:_(Ie,{children:[e(Ht,{}),e(pt,{}),n?e(vt,{}):e("div",{className:jt})]})})}const Wt="modulepreload",j={},Xt="/tac.io/",Jt=function(n,r){return!r||r.length===0?n():Promise.all(r.map(o=>{if(o=`${Xt}${o}`,o in j)return;j[o]=!0;const a=o.endsWith(".css"),s=a?'[rel="stylesheet"]':"";if(document.querySelector(`link[href="${o}"]${s}`))return;const c=document.createElement("link");if(c.rel=a?"stylesheet":Wt,a||(c.as="script",c.crossOrigin=""),c.href=o,document.head.appendChild(c),a)return new Promise((m,u)=>{c.addEventListener("load",m),c.addEventListener("error",()=>u(new Error(`Unable to preload CSS for ${o}`)))})})).then(()=>n())},Vt=t=>{t&&t instanceof Function&&Jt(()=>import("./web-vitals.d62816c8.js"),[]).then(({getCLS:n,getFID:r,getFCP:o,getLCP:a,getTTFB:s})=>{n(t),r(t),o(t),a(t),s(t)})};Oe.render(e(Pe,{injectFirst:!0,children:e(Kt,{})}),document.getElementById("root"));Vt();
